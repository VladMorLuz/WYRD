<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>WYRD - RPG Dungeon Crawler</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#171717">
    <link rel="stylesheet" href="style/wyrd.css" />
</head>
<body>
    <header id="site-header">
        <div class="header-left">
            <h1>WYRD</h1>
            <h2>Roguelike Dungeon Crawler</h2>
        </div>
        <div class="header-right">
            <div class="hud-mini">
                <span id="mini-hp">‚Äî/‚Äî</span>
                <span id="mini-xp">XP: 0</span>
                <span id="mini-floor">F: 1</span>
            </div>
        </div>
    </header>

    <div id="menu-screen" class="screen active">
        <div class="menu-card">
            <h1>WYRD</h1>
            <h2>Roguelike Dungeon Crawler</h2>
            <div class="menu-buttons">
                <button id="btn-new" onclick="startNewGame()">New Game</button>
                <button onclick="alert('Load Game n√£o implementado ainda!')">Load Game</button>
                <button onclick="alert('Settings n√£o implementado ainda!')">Settings ‚öôÔ∏è</button>
            </div>
            <p class="menu-tip">Dica: troque sprites em <code>assets/</code> para ver altera√ß√µes visuais.</p>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="game-container">
            <canvas id="game-canvas" width="800" height="600" aria-label="Canvas do jogo"></canvas>

            <div id="mobile-controls">
                <div class="dpad">
                    <button id="dpad-up" class="dpad-btn">‚ñ≤</button>
                    <button id="dpad-left" class="dpad-btn">‚óÄ</button>
                    <button id="dpad-right" class="dpad-btn">‚ñ∂</button>
                    <button id="dpad-down" class="dpad-btn">‚ñº</button>
                </div>
                <div class="action-btn-container">
                    <button id="action-btn" class="action-btn">E</button>
                </div>
            </div>
            <div id="ui-panel">
                <div id="ui-top">
                    <div class="tabs">
                        <button class="tab-button active" onclick="switchTab('inventory', this)">üéí</button>
                        <button class="tab-button" onclick="switchTab('equip', this)">‚öîÔ∏è</button>
                        <button class="tab-button" onclick="switchTab('status', this)">üôç‚Äç‚ôÇÔ∏è</button>
                        <button class="tab-button" onclick="switchTab('skills', this)">üìö</button>
                        <button class="tab-button" onclick="switchTab('settings', this)">‚öôÔ∏è</button>
                    </div>

                    <div class="profile-row">
                        <div class="portrait-wrap">
                            <img id="player-portrait" src="assets/" alt="Portrait do jogador" />
                        </div>
                        <div id="player-stats" class="player-stats">
                            <h2>|| STATUS ||</h2>
                            <div id="player-stats-content">
                                Vida: <span id="player-health"> ‚Äî </span><br>
                                Experi√™ncia: <span id="player-xp">0</span><br>
                                Andar: <span id="dungeon-floor">1</span>
                            </div>
                        </div>
                    </div>

                    <div id="ui-content" class="ui-content">
                        <div id="inventory" class="tab-content active">Seu invent√°rio est√° vazio.</div>
                        <div id="equip" class="tab-content">Sem Equipamentos</div>
                        <div id="status" class="tab-content">N√≠vel: 1 <br> F√çSICO <BR> AGILIDADE <BR> MENTE <BR> PERCEP√á√ÉO <BR> SORTE</div>
                        <div id="skills" class="tab-content">Nenhuma habilidade desbloqueada.</div>
                        <div id="settings" class="tab-content">Ajustes aqui.</div>
                    </div>
                </div>

                <div id="ui-log" class="ui-log" role="log" aria-live="polite">
                    <p>Bem-vindo √† Wyrd!</p>
                </div>
            </div>
        </div>
    </div>

    <footer id="site-footer">
        <div>WYRD ‚Ä¢ &copy; <span id="year"></span> ‚Ä¢ Constru√≠do com minha dor e sofrimento</div>
        <div class="footer-right">v0.0.1.alguma coisa - Por favor, me mata logo</div>
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        document.addEventListener('DOMContentLoaded', () => {
            window.startNewGame = function() {
                document.getElementById('menu-screen').style.display = 'none';
                document.getElementById('game-screen').style.display = 'flex';

                if (typeof window.initGame === 'function') {
                    window.initGame();
                } else {
                    console.error('initGame n√£o est√° definida!');
                }
            };

            window.switchTab = function(tabId, btn) {
                document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
                document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));
                document.getElementById(tabId).classList.add('active');
                if (btn) btn.classList.add('active');
            }
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('SW registered: ', registration);
                }).catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
            });
        }
    </script>

    <script src="core/constants.js"></script>
    <script src="core/utils.js"></script>
    <script src="core/roomtypes.js"></script>
    <script src="core/entities.js"></script>
    <script src="core/mobfactory.js"></script>
    <script src="core/mapgen.js"></script>
    <script src="core/renderer.js"></script>
    <script src="core/ui.js"></script>
    <script src="core/combat.js"></script>
    <script src="core/engine.js"></script>
</body>
</html>
